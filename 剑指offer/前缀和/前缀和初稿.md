先从熟悉的数列开始：
数列 $\lbrace a_n \rbrace$
$$a_1,a_2,a_3,...,a_{n+1},...$$
数列的前 n 项和：
$$S_n=a_1+a_2+a_3+\ldots+a_{n-1}+a_{n}$$

例如，求数列的前 3 项和 $S_3 = a_1 + a_2 + a_3$ ，数列的前 7 项和 $S_7 = a_1 + a_2 + a_3 + a_4 + a_5 + a_6 + a_7$。


假如要求连续子数列 $ a_4,a_5,a_6,a_7 $ 的和。可以用数列的前 7 项和减去数列的前 3 项和。即：
$$S_7 - S_3 = a_4 + a_5 + a_6 + a_7;$$


进行抽象：假如要求连续子数列 $ ai,\cdots,aj $ 的和，则可以用数列前 j 项的和减去数列前 (i-1) 项的和：
$$ S_j - S_{i-1} = a_i + a_{i+1} +...+a_j $$ 


回到数组，数组的下标是从 0 开始的：
$$[a_0,a_1,a_2,...,a_{n+1},...]$$

数组的前 3 项和，实际是从 $a_0$ 一直加到 $a_2$，即：$S_3 = a_0 + a_1 + a_2$。

以防搞混，在数组的最前面添加一个 0 元素，即 $a_0 = 0$，这样既不会影响结果，又和处理数列的方法同步。
数组的前 7 项和，实际实从 $a_0$ 加到 $a_6$，即：$S_7 = a_0 + a_1 + a_2 + a_3 + a_4 + a_5 + a_6$;

由前面的数列部分可知，想要计算连续子数组 $[a_4,a_5,a_6,a_7]$ 的值，应该是数组的前 8 项减去数组的前 4 项和，即 $S_8 - S_4$：
$$
\left \{
\begin{aligned}
S_4 &= a_0 + a_1 + a_2 + a_3 \\
S_8 &= a_0 + a_1 + a_2 + a_3 + a_4 + a_5 + a_6 + a_7
\end{aligned}
\right. 
$$

由$S_8 - S_4$得:
$$ S_8 - S_4 = a_4 + a_5 + a_6 + a_7 $$

进行抽象，假如要求数组的连续子数组 $arr[i,...,j]$ 的和：
$$S_{j+1} - S_{[(i-1)+1]} = a_i +...+ a_j$$
即：
$$S_{(j+1)} - S_i = a_i +...+ a_j $$


----
$$S_{j+1} - S_i = k$$
移项
$$S_i = S_{j+1} - k (0 \lt i \le (j+1)-1=j)$$

当遍历到第 j 项时，前 j+1 项的和 $S_{j+1}$ 就已经确定了。而 k 又是一个常数，换句话说 $S_{j+1} - k$ 是一个定值。此时前缀和数组中保存了数组的前 1 项和 $S_1$，前 2 项和 $S_2$，... ，前 j 项和 Sj。即：
$$[0=>1,S_1=>1,...,S_j=>1]$$

假如存在连续子数组的和为 k，那么以下等式成立：
$$S_i = S_{j+1} - k$$

而 i 的取值范围为 $0 \lt i \le j$。
如果 $S_i = S_{j+1} - k$ 成立，那么 Si 一定是前缀和数组的某个键，具体是哪个键无关紧要。
于是就将是否存在和为 k 的连续子数组的问题转化为了 $S_{j+1} - k$ 的值**是否为前缀和的键的问题。**
