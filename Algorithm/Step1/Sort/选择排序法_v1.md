# 选择排序法

## 什么是选择排序法

## 循环不变量

第一种：

`a[0...i)` 有序，`a[i...n)` 无序；

第二种：

`a[0...i)` 无序，`a[i...n)` 有序。

以第二种为例，代码如下：

```PHP
public static function sort(array $arr)
{
    for ($i = count($arr) - 1; $i >= 0; $i--) {
        // 循环不变量：arr[0...i)未排序，arr[i...n)已排序
        $t = $arr[$i];
        for ($j = $i; $j + 1 < count($arr) && $t > $arr[$j + 1]; $j++) {
            $arr[$j] = $arr[$j + 1];
        }
        $arr[$j] = $t;
    }
    return $arr;
}
```

有一个关键的地方：就是如何把 `a[i]` 放到合适的位置？换句话说为什么经过内层循环之后就可以直接把 `a[i]` 放到循环终止时 `a[j]` 的位置？

内层循环：

```PHP
$t = $arr[$i];
for ($j = $i; $j + 1 < count($arr) && $t > $arr[$j + 1]; $j++) {
    $arr[$j] = $arr[$j + 1];
}
```

先看一个简单的例子：

```PHP
$arr = [1, 4, 3, 2, 6, 5];
for ($j = 0; $j + 1 < count($arr); $j++) {
    $arr[$j] = $arr[$j + 1];
} 
```

结果如下：

```PHP
array(6) {
  [0]=>
  int(4)
  [1]=>
  int(3)
  [2]=>
  int(2)
  [3]=>
  int(6)
  [4]=>
  int(5)
  [5]=>
  int(5)
}
```

这个数组的所有元素都往前挪了一个位置。但是有两个特殊的位置：

- `arr[0]` 被 `a[1]` 覆盖，但是 `a[0]` 没有覆盖别人，所以 `a[0]` 的值消失了；
- `arr[5]` 覆盖了 `a[4]`， 但是没有元素覆盖 `a[5]`，所以 `a[5]` 的值不变。

一个是没有元素可覆盖，一个是没有被其他元素覆盖。

假如让第一个元素覆盖最后一个元素的值：

```PHP
$arr = [1,4,3,2,6,5];
$t = $arr[0];
for ($j = 0; $j + 1 < count($arr); $j++) {
    $arr[$j] = $arr[$j + 1];
}
$arr[$j] = $t;
```

结果如下：

```PHP
array(6) {
  [0]=>
  int(4)
  [1]=>
  int(3)
  [2]=>
  int(2)
  [3]=>
  int(6)
  [4]=>
  int(5)
  [5]=>
  int(1)
}
```